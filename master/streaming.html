<!doctype html>
<html class="no-js" lang="en">
  <head><meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width,initial-scale=1"/>
    <meta name="color-scheme" content="light dark"><meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />
<link rel="index" title="Index" href="genindex.html" /><link rel="search" title="Search" href="search.html" /><link rel="next" title="HDL Targeting with HDL-Coder" href="targeting.html" /><link rel="prev" title="Installation" href="install.html" />

    <!-- Generated with Sphinx 5.3.0 and Furo 2023.03.27 -->
        <title>Receiving and Sending Data - Analog Devices, Inc. Transceiver Toolbox v22.2.1</title>
      <link rel="stylesheet" type="text/css" href="_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="_static/styles/furo.css?digest=fad236701ea90a88636c2a8c73b44ae642ed2a53" />
    <link rel="stylesheet" type="text/css" href="_static/design-style.1e8bd061cd6da7fc9cf755528e8ffc24.min.css" />
    <link rel="stylesheet" type="text/css" href="_static/styles/furo-extensions.css?digest=30d1aed668e5c3a91c3e3bf6a60b675221979f0e" />
    <link rel="stylesheet" type="text/css" href="_static/css/style.css" />
    
    


<style>
  body {
    --color-code-background: #f8f8f8;
  --color-code-foreground: black;
  --color-sidebar-item-background--current: black;
  --color-sidebar-link-text: black;
  --color-sidebar-link-text--top-level: black;
  
  }
  @media not print {
    body[data-theme="dark"] {
      --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  --color-sidebar-item-background--current: white;
  --color-sidebar-link-text: white;
  --color-sidebar-link-text--top-level: white;
  
    }
    @media (prefers-color-scheme: dark) {
      body:not([data-theme="light"]) {
        --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  --color-sidebar-item-background--current: white;
  --color-sidebar-link-text: white;
  --color-sidebar-link-text--top-level: white;
  
      }
    }
  }
</style></head>
  <body>
    
    <script>
      document.body.dataset.theme = localStorage.getItem("theme") || "auto";
    </script>
    

<svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
  <symbol id="svg-toc" viewBox="0 0 24 24">
    <title>Contents</title>
    <svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 1024 1024">
      <path d="M408 442h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zm-8 204c0 4.4 3.6 8 8 8h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56zm504-486H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 632H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM115.4 518.9L271.7 642c5.8 4.6 14.4.5 14.4-6.9V388.9c0-7.4-8.5-11.5-14.4-6.9L115.4 505.1a8.74 8.74 0 0 0 0 13.8z"/>
    </svg>
  </symbol>
  <symbol id="svg-menu" viewBox="0 0 24 24">
    <title>Menu</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-menu">
      <line x1="3" y1="12" x2="21" y2="12"></line>
      <line x1="3" y1="6" x2="21" y2="6"></line>
      <line x1="3" y1="18" x2="21" y2="18"></line>
    </svg>
  </symbol>
  <symbol id="svg-arrow-right" viewBox="0 0 24 24">
    <title>Expand</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-chevron-right">
      <polyline points="9 18 15 12 9 6"></polyline>
    </svg>
  </symbol>
  <symbol id="svg-sun" viewBox="0 0 24 24">
    <title>Light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="feather-sun">
      <circle cx="12" cy="12" r="5"></circle>
      <line x1="12" y1="1" x2="12" y2="3"></line>
      <line x1="12" y1="21" x2="12" y2="23"></line>
      <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
      <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
      <line x1="1" y1="12" x2="3" y2="12"></line>
      <line x1="21" y1="12" x2="23" y2="12"></line>
      <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
      <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
    </svg>
  </symbol>
  <symbol id="svg-moon" viewBox="0 0 24 24">
    <title>Dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-moon">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M12 3c.132 0 .263 0 .393 0a7.5 7.5 0 0 0 7.92 12.446a9 9 0 1 1 -8.313 -12.454z" />
    </svg>
  </symbol>
  <symbol id="svg-sun-half" viewBox="0 0 24 24">
    <title>Auto light/dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-shadow">
      <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
      <circle cx="12" cy="12" r="9" />
      <path d="M13 12h5" />
      <path d="M13 15h4" />
      <path d="M13 18h1" />
      <path d="M13 9h4" />
      <path d="M13 6h1" />
    </svg>
  </symbol>
</svg>

<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation">
<input type="checkbox" class="sidebar-toggle" name="__toc" id="__toc">
<label class="overlay sidebar-overlay" for="__navigation">
  <div class="visually-hidden">Hide navigation sidebar</div>
</label>
<label class="overlay toc-overlay" for="__toc">
  <div class="visually-hidden">Hide table of contents sidebar</div>
</label>



<div class="page">
  <header class="mobile-header">
    <div class="header-left">
      <label class="nav-overlay-icon" for="__navigation">
        <div class="visually-hidden">Toggle site navigation sidebar</div>
        <i class="icon"><svg><use href="#svg-menu"></use></svg></i>
      </label>
    </div>
    <div class="header-center">
      <a href="index.html"><div class="brand">Analog Devices, Inc. Transceiver Toolbox v22.2.1</div></a>
    </div>
    <div class="header-right">
      <div class="theme-toggle-container theme-toggle-header">
        <button class="theme-toggle">
          <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
          <svg class="theme-icon-when-auto"><use href="#svg-sun-half"></use></svg>
          <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
          <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
        </button>
      </div>
      <label class="toc-overlay-icon toc-header-icon" for="__toc">
        <div class="visually-hidden">Toggle table of contents sidebar</div>
        <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
      </label>
    </div>
  </header>
  <aside class="sidebar-drawer">
    <div class="sidebar-container">
      
      <div class="sidebar-sticky"><a class="sidebar-brand" href="index.html">
  
  <div class="sidebar-logo-container">
    <img class="sidebar-logo only-light" src="_static/logos/logo_black_cropped.png" alt="Light Logo"/>
    <img class="sidebar-logo only-dark" src="_static/logos/logo_white_cropped.png" alt="Dark Logo"/>
  </div>
  
  <span class="sidebar-brand-text">Analog Devices, Inc. Transceiver Toolbox v22.2.1</span>
  
</a><form class="sidebar-search-container" method="get" action="search.html" role="search">
  <input class="sidebar-search" placeholder="Search" name="q" aria-label="Search">
  <input type="hidden" name="check_keywords" value="yes">
  <input type="hidden" name="area" value="default">
</form>
<div id="searchbox"></div><div class="sidebar-scroll"><div class="sidebar-tree">
  <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="install.html">Installation</a></li>
<li class="toctree-l1 current current-page"><a class="current reference internal" href="#">Receiving and Sending Data</a></li>
<li class="toctree-l1"><a class="reference internal" href="targeting.html">HDL Targeting with HDL-Coder</a></li>
<li class="toctree-l1"><a class="reference internal" href="examples.html">Examples</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="objects.html">Hardware Interface APIs</a><input class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" role="switch" type="checkbox"/><label for="toctree-checkbox-1"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="_generated/sysobjects/adi.AD9361.Tx.html">adi.AD9361.Tx</a></li>
<li class="toctree-l2"><a class="reference internal" href="_generated/sysobjects/adi.AD9361.Rx.html">adi.AD9361.Rx</a></li>
<li class="toctree-l2"><a class="reference internal" href="_generated/sysobjects/adi.AD9363.Tx.html">adi.AD9363.Tx</a></li>
<li class="toctree-l2"><a class="reference internal" href="_generated/sysobjects/adi.AD9363.Rx.html">adi.AD9363.Rx</a></li>
<li class="toctree-l2"><a class="reference internal" href="_generated/sysobjects/adi.AD9364.Tx.html">adi.AD9364.Tx</a></li>
<li class="toctree-l2"><a class="reference internal" href="_generated/sysobjects/adi.AD9364.Rx.html">adi.AD9364.Rx</a></li>
<li class="toctree-l2"><a class="reference internal" href="_generated/sysobjects/adi.AD9371.Tx.html">adi.AD9371.Tx</a></li>
<li class="toctree-l2"><a class="reference internal" href="_generated/sysobjects/adi.AD9371.Rx.html">adi.AD9371.Rx</a></li>
<li class="toctree-l2"><a class="reference internal" href="_generated/sysobjects/adi.ADRV9009.Tx.html">adi.ADRV9009.Tx</a></li>
<li class="toctree-l2"><a class="reference internal" href="_generated/sysobjects/adi.ADRV9009.Rx.html">adi.ADRV9009.Rx</a></li>
<li class="toctree-l2"><a class="reference internal" href="_generated/sysobjects/adi.ADRV9361Z7035.Tx.html">adi.ADRV9361Z7035.Tx</a></li>
<li class="toctree-l2"><a class="reference internal" href="_generated/sysobjects/adi.ADRV9361Z7035.Rx.html">adi.ADRV9361Z7035.Rx</a></li>
<li class="toctree-l2"><a class="reference internal" href="_generated/sysobjects/adi.ADRV9364Z7020.Tx.html">adi.ADRV9364Z7020.Tx</a></li>
<li class="toctree-l2"><a class="reference internal" href="_generated/sysobjects/adi.ADRV9364Z7020.Rx.html">adi.ADRV9364Z7020.Rx</a></li>
<li class="toctree-l2"><a class="reference internal" href="_generated/sysobjects/adi.ADRV9371.Tx.html">adi.ADRV9371.Tx</a></li>
<li class="toctree-l2"><a class="reference internal" href="_generated/sysobjects/adi.ADRV9371.Rx.html">adi.ADRV9371.Rx</a></li>
<li class="toctree-l2"><a class="reference internal" href="_generated/sysobjects/adi.FMComms2.Tx.html">adi.FMComms2.Tx</a></li>
<li class="toctree-l2"><a class="reference internal" href="_generated/sysobjects/adi.FMComms2.Rx.html">adi.FMComms2.Rx</a></li>
<li class="toctree-l2"><a class="reference internal" href="_generated/sysobjects/adi.FMComms3.Tx.html">adi.FMComms3.Tx</a></li>
<li class="toctree-l2"><a class="reference internal" href="_generated/sysobjects/adi.FMComms3.Rx.html">adi.FMComms3.Rx</a></li>
<li class="toctree-l2"><a class="reference internal" href="_generated/sysobjects/adi.FMComms4.Tx.html">adi.FMComms4.Tx</a></li>
<li class="toctree-l2"><a class="reference internal" href="_generated/sysobjects/adi.FMComms4.Rx.html">adi.FMComms4.Rx</a></li>
<li class="toctree-l2"><a class="reference internal" href="_generated/sysobjects/adi.PackRF.Tx.html">adi.PackRF.Tx</a></li>
<li class="toctree-l2"><a class="reference internal" href="_generated/sysobjects/adi.PackRF.Rx.html">adi.PackRF.Rx</a></li>
<li class="toctree-l2"><a class="reference internal" href="_generated/sysobjects/adi.Pluto.Tx.html">adi.Pluto.Tx</a></li>
<li class="toctree-l2"><a class="reference internal" href="_generated/sysobjects/adi.Pluto.Rx.html">adi.Pluto.Rx</a></li>
<li class="toctree-l2"><a class="reference internal" href="_generated/sysobjects/adi.ADRV9002.Tx.html">adi.ADRV9002.Tx</a></li>
<li class="toctree-l2"><a class="reference internal" href="_generated/sysobjects/adi.ADRV9002.Rx.html">adi.ADRV9002.Rx</a></li>
<li class="toctree-l2"><a class="reference internal" href="_generated/sysobjects/adi.FMComms8.Tx.html">adi.FMComms8.Tx</a></li>
<li class="toctree-l2"><a class="reference internal" href="_generated/sysobjects/adi.FMComms8.Rx.html">adi.FMComms8.Rx</a></li>
<li class="toctree-l2"><a class="reference internal" href="_generated/sysobjects/adi.ADRV9009ZU11EG.Tx.html">adi.ADRV9009ZU11EG.Tx</a></li>
<li class="toctree-l2"><a class="reference internal" href="_generated/sysobjects/adi.ADRV9009ZU11EG.Rx.html">adi.ADRV9009ZU11EG.Rx</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="allrefdesigns.html">HDL Reference Designs</a><input class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" role="switch" type="checkbox"/><label for="toctree-checkbox-2"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="_generated/hdlrefdesigns/adrv9361z7035.html">adrv9361z7035 Reference Design Integration</a></li>
<li class="toctree-l2"><a class="reference internal" href="_generated/hdlrefdesigns/adrv9364z7020.html">adrv9364z7020 Reference Design Integration</a></li>
<li class="toctree-l2"><a class="reference internal" href="_generated/hdlrefdesigns/pluto.html">pluto Reference Design Integration</a></li>
<li class="toctree-l2"><a class="reference internal" href="_generated/hdlrefdesigns/fmcomms2.html">fmcomms2 Reference Design Integration</a></li>
<li class="toctree-l2"><a class="reference internal" href="_generated/hdlrefdesigns/fmcomms5.html">fmcomms5 Reference Design Integration</a></li>
<li class="toctree-l2"><a class="reference internal" href="_generated/hdlrefdesigns/adrv9371.html">adrv9371 Reference Design Integration</a></li>
<li class="toctree-l2"><a class="reference internal" href="_generated/hdlrefdesigns/adrv9002.html">adrv9002 Reference Design Integration</a></li>
<li class="toctree-l2"><a class="reference internal" href="_generated/hdlrefdesigns/adrv9009.html">adrv9009 Reference Design Integration</a></li>
<li class="toctree-l2"><a class="reference internal" href="_generated/hdlrefdesigns/fmcomms8.html">fmcomms8 Reference Design Integration</a></li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Development</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="dev_hdl_workflow.html">HDL Workflow</a></li>
</ul>

</div>
</div>

      </div>
      
    </div>
  </aside>
  <div class="main">
    <div class="content">
      <div class="article-container">
        <a href="#" class="back-to-top muted-link">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
            <path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12z"></path>
          </svg>
          <span>Back to top</span>
        </a>
        <div class="content-icon-container">
          
<div class="theme-toggle-container theme-toggle-content">
            <button class="theme-toggle">
              <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
              <svg class="theme-icon-when-auto"><use href="#svg-sun-half"></use></svg>
              <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
              <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
            </button>
          </div>
          <label class="toc-overlay-icon toc-content-icon" for="__toc">
            <div class="visually-hidden">Toggle table of contents sidebar</div>
            <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
          </label>
        </div>
        <article role="main">
          <section id="receiving-and-sending-data">
<h1>Receiving and Sending Data<a class="headerlink" href="#receiving-and-sending-data" title="Permalink to this heading">#</a></h1>
<p>Remote data streaming to and from hardware is made available through <a class="reference external" href="https://www.mathworks.com/help/matlab/matlab_prog/what-are-system-objects.html">system object interfaces</a>, which are unique for each component or platform. The hardware interfacing system objects provide a since class to both configure a given platform and move data back and forth from the device.</p>
<p>Command and control of hardware from MATLAB is accomplished by leveraging the <a class="reference external" href="https://wiki.analog.com/software/linux/docs/iio/iio">IIO drivers</a> built into the target platform’s kernel and <a class="reference external" href="https://wiki.analog.com/resources/tools-software/linux-software/libiio">libiio</a> which provides remote backends to control drivers across different backends. Backends can be Ethernet, serial, or USB based. Below is a diagram of the different components in the stack for an FMComms based systems, but will be nearly identical for all transceiver based systems.</p>
<p><img alt="MATLAB libiio Stack" src="_images/MATLAB_libiio_Stack.png" /></p>
<p>Since libiio is cross-platform it can be used from Windows, Linux, or macOS based systems. It is also a lower level library independent of MATLAB, so when moving toward production or untethered systems similar APIs that are used in MATLAB can be used in C,C++,Python, or other languages.</p>
<section id="connecting-and-configuration">
<h2>Connecting and Configuration<a class="headerlink" href="#connecting-and-configuration" title="Permalink to this heading">#</a></h2>
<p>Connecting to hardware is done by setting the <strong>uri</strong> property of the system object interface. The <strong>uri</strong> for libiio always has the convention “<em>&lt; backend &gt;:&lt; address &gt;</em>”, where <em>backend</em> can be ip,usb, or serial. <em>address</em> will be specific to the backend. This is documented in the <a class="reference external" href="https://analogdevicesinc.github.io/libiio/master/libiio/group__Context.html#gafdcee40508700fa395370b6c636e16fe">libiio API</a>.</p>
<p>Below is a basic example of setting up an AD9361 receiver using an Ethernet/IP backend where the address of the target system is 192.168.2.1:</p>
<div class="highlight-linenums=&quot;1&quot; notranslate"><div class="highlight"><pre><span></span>rx = adi.AD9361.Rx;
rx.uri = &#39;ip:192.168.2.1&#39;;
data = rx();
</pre></div>
</div>
<p>With the code above, the hardware is not contacted until the operator or step method is called on line 3. Therefore, any properties that are set or defined before line 3 are not applied or updated on the hardware until after line 3. However, after line 3 has completed the object will become locked and certain configuration changes cannot be applied after this point. These will primarily sample rates and buffer sizes.</p>
<p>The state of the object follows the flow of the diagram below triggered by line line 3 above.</p>
<div class="mermaid">
            graph LR
  Z[Operator Called] --&gt;A;
  A[Connect To Board] --&gt; B[Update Properties];
  B --&gt; C[Initialize Buffers];
  C --&gt; D[Send or Receive Data];
  D --&gt; E[Lock Object];
        </div><p>Once the object becomes locked it must be released if the sample rate or buffers need to be modified. This will disconnect from the hardware:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">rx</span><span class="o">.</span><span class="n">release</span><span class="p">();</span> <span class="o">%</span> <span class="n">Release</span> <span class="nb">object</span>
</pre></div>
</div>
<p>To provide a complete example we can do more advanced configuration like so to demonstrate property changes:</p>
<div class="highlight-linenums=&quot;1&quot; notranslate"><div class="highlight"><pre><span></span>rx = adi.AD9361.Rx;
rx.uri = &#39;ip:192.168.2.1&#39;;
rx.SamplesPerFrame = 1024;
rx.CenterFrequency = 1e9;
dataLO1 = rx();

% Update tunable property
rx.CenterFrequency = 2e9;
dataLO2 = rx();

% Update non-tunable property
rx.release();
rx.SamplesPerFrame = 4096;
dataLargerBuffer = rx();
</pre></div>
</div>
</section>
<section id="receiving-data">
<h2>Receiving Data<a class="headerlink" href="#receiving-data" title="Permalink to this heading">#</a></h2>
<p>To receive or capture data from a given device first you must instantiate that device’s interface class. For example on a AD9361 based system, this would be as follows:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">rx</span> <span class="o">=</span> <span class="n">adi</span><span class="o">.</span><span class="n">AD9361</span><span class="o">.</span><span class="n">Rx</span><span class="p">;</span>
</pre></div>
</div>
<p>Once instantiated you can configure the number of samples to be captured by setting the property <strong>SamplesPerFrame.</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">rx</span><span class="o">.</span><span class="n">SamplesPerFrame</span> <span class="o">=</span> <span class="mf">1e6</span><span class="p">;</span>
</pre></div>
</div>
<p><strong>SamplesPerFrame</strong> is the number of samples per channel which will be captured. If your device produces complex data (I and Q) this is the number of complex samples. There will be a limit to the maximum samples which can be collected. By default this is set to 2^20, but it may be possible to make it larger depending on hardware. Once the operator methods are used for a give instantiation, the object will become locked and the <strong>SamplesPerFrame</strong> property cannot be changed. This is known as a non-tunable property.</p>
<p>To actually collect the samples or perform the capture, the operator of the system object should be used or the <strong>step</strong> method as so:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">data</span> <span class="o">=</span> <span class="n">rx</span><span class="p">();</span> <span class="o">%</span> <span class="n">Operator</span> <span class="n">method</span>
<span class="n">data</span> <span class="o">=</span> <span class="n">rx</span><span class="o">.</span><span class="n">step</span><span class="p">();</span> <span class="o">%</span> <span class="n">Step</span> <span class="n">method</span>
</pre></div>
</div>
<p>Both method calls are equivalent, and the produced matrix <strong>data</strong> will be of size [SamplesPerFrame x length(EnabledChannels)]. <strong>EnabledChannels</strong> determines the channels which data will be collected from. <strong>EnabledChannels</strong> is a [1xN] vector with indexes starting at 1 of the desired channels. If the device transmits or receive complex data, these indexes are for complex channel pairs. For example, the AD9361 has 2 receivers (4 ADC) and setting <strong>EnabledChannels</strong> as so will capture data from all 4 converters:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">rx</span><span class="o">.</span><span class="n">EnabledChannels</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">];</span>
</pre></div>
</div>
<p>You cannot enable individual converters on complex data based devices, and the <strong>EnabledChannels</strong> property is always sorted so the channel mappings cannot be changed within the produced data.</p>
</section>
<section id="sending-data">
<h2>Sending Data<a class="headerlink" href="#sending-data" title="Permalink to this heading">#</a></h2>
<p>Transmitting data is very similar to receiving it, a transmitter class needs to be instantiated to send data first. For a ADRV9009 based device this would be as follows:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">tx</span> <span class="o">=</span> <span class="n">adi</span><span class="o">.</span><span class="n">ADRV9009</span><span class="o">.</span><span class="n">Tx</span><span class="p">;</span>
</pre></div>
</div>
<p>Unlike the receivers, transmit objects automatically create their internal buffers based on the data passed to them during their operator or step methods. These methods can be called as follows with some data:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">tx_data</span> <span class="o">=</span> <span class="nb">complex</span><span class="p">(</span><span class="mi">2</span><span class="o">^</span><span class="mf">15.</span><span class="o">*</span><span class="n">randn</span><span class="p">(</span><span class="mi">1024</span><span class="p">,</span><span class="mi">1</span><span class="p">),</span><span class="mi">2</span><span class="o">^</span><span class="mf">15.</span><span class="o">*</span><span class="n">randn</span><span class="p">(</span><span class="mi">1024</span><span class="p">,</span><span class="mi">1</span><span class="p">));</span>
<span class="n">tx</span><span class="p">(</span><span class="n">tx_data</span><span class="p">);</span> <span class="o">%</span> <span class="n">Operator</span> <span class="n">method</span>
<span class="n">tx</span><span class="o">.</span><span class="n">step</span><span class="p">(</span><span class="n">tx_data</span><span class="p">);</span> <span class="o">%</span> <span class="n">Step</span> <span class="n">method</span>
</pre></div>
</div>
<p>However, once the step or operator method is called the object becomes locked and future passed data vectors must be the same length. As with the receive classes, the size of the passed data must be [SomeFixedSize x EnabledChannels]. <strong>EnabledChannels</strong> has the same definition as the receive side, except applied to DACs.</p>
<p>Unlike the receiver, transmit objects have the ability to utilize <a class="reference external" href="https://analogdevicesinc.github.io/libiio/group__Buffer.html#ga6caadf077c112ae55a64276aa24ef832">cyclic buffers</a> which will continuously transmit a provided vector without gaps forever. To utilize cyclic buffers set the <strong>EnableCyclicBuffers</strong> property then pass the operator data as follows:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">tx</span> <span class="o">=</span> <span class="n">adi</span><span class="o">.</span><span class="n">ADRV9009</span><span class="o">.</span><span class="n">Tx</span><span class="p">;</span>
<span class="n">tx</span><span class="o">.</span><span class="n">EnableCyclicBuffers</span> <span class="o">=</span> <span class="n">true</span><span class="p">;</span>
<span class="n">tx_data</span> <span class="o">=</span> <span class="nb">complex</span><span class="p">(</span><span class="mi">2</span><span class="o">^</span><span class="mf">15.</span><span class="o">*</span><span class="n">randn</span><span class="p">(</span><span class="mi">1024</span><span class="p">,</span><span class="mi">1</span><span class="p">),</span><span class="mi">2</span><span class="o">^</span><span class="mf">15.</span><span class="o">*</span><span class="n">randn</span><span class="p">(</span><span class="mi">1024</span><span class="p">,</span><span class="mi">1</span><span class="p">));</span>
<span class="n">tx</span><span class="p">(</span><span class="n">tx_data</span><span class="p">);</span> <span class="o">%</span> <span class="n">Data</span> <span class="n">will</span> <span class="n">repeat</span> <span class="n">forever</span>
</pre></div>
</div>
<p>One a vector is passed to the object with <strong>EnableCyclicBuffers</strong> set to <strong>true</strong>, the object will not accept future buffers unless first release or cleared.</p>
<p>By default the system objects will utilize <strong>DMA</strong> as the source of data for the DACs, which will use data past from the operator. This can be set manually through the <strong>DataSource</strong> properties as follows:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">rx</span><span class="o">.</span><span class="n">DataSource</span> <span class="o">=</span> <span class="s1">&#39;DMA&#39;</span><span class="p">;</span>
</pre></div>
</div>
</section>
<section id="dds">
<h2>DDS<a class="headerlink" href="#dds" title="Permalink to this heading">#</a></h2>
<p>Instead of providing data for transmission, it is possible to utilize DDSs inside the FPGA to send tones to individual DACs. For specific boards there are two DDS per DAC, which can be used to create complex (one-sided) tones. These DDSs can be used by first setting the <strong>DataSource</strong> property:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">rx</span><span class="o">.</span><span class="n">DataSource</span> <span class="o">=</span> <span class="s1">&#39;DDS&#39;</span><span class="p">;</span>
</pre></div>
</div>
<p>Then the scale, frequency, and phase of each DDS can be controlled through three attributes as follows:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">rx</span><span class="o">.</span><span class="n">DDSFrequencies</span> <span class="o">=</span> <span class="p">[</span><span class="mf">1e3</span><span class="p">,</span><span class="mf">1e3</span><span class="p">,</span><span class="mf">1e3</span><span class="p">,</span><span class="mf">1e3</span><span class="p">;</span><span class="mf">1e4</span><span class="p">,</span><span class="mf">1e4</span><span class="p">,</span><span class="mf">1e4</span><span class="p">,</span><span class="mf">1e4</span><span class="p">];</span> <span class="o">%</span> <span class="n">Must</span> <span class="n">be</span> <span class="nb">range</span> <span class="p">[</span><span class="mi">0</span> <span class="n">FS</span><span class="o">/</span><span class="mi">2</span><span class="p">]</span>
<span class="n">rx</span><span class="o">.</span><span class="n">DDSScales</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">;</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">];</span> <span class="o">%</span> <span class="n">Must</span> <span class="n">be</span> <span class="nb">range</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">]</span>
<span class="n">rx</span><span class="o">.</span><span class="n">DDSPhases</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mf">90e3</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mf">90e3</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">;</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">];</span> <span class="o">%</span> <span class="n">Each</span> <span class="ow">in</span> <span class="n">millidegrees</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">90000</span><span class="p">]</span>
</pre></div>
</div>
<p>Each of the above properties must be of size [2x(NumberOfPartDACs)], where each row is the first DDS of a given DAC (column) and the second row is the second DDS of a given DAC (column).</p>
</section>
</section>

        </article>
      </div>
      <footer>
        
        <div class="related-pages">
          <a class="next-page" href="targeting.html">
              <div class="page-info">
                <div class="context">
                  <span>Next</span>
                </div>
                <div class="title">HDL Targeting with HDL-Coder</div>
              </div>
              <svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
            </a>
          <a class="prev-page" href="install.html">
              <svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
              <div class="page-info">
                <div class="context">
                  <span>Previous</span>
                </div>
                
                <div class="title">Installation</div>
                
              </div>
            </a>
        </div>
        <div class="bottom-of-page">
          <div class="left-details">
            <div class="copyright">
                Copyright &#169; 2019-2022, Analog Devices, Inc
            </div>
            Made with <a href="https://www.sphinx-doc.org/">Sphinx</a> and <a class="muted-link" href="https://pradyunsg.me">@pradyunsg</a>'s
            
            <a href="https://github.com/pradyunsg/furo">Furo</a>
            
          </div>
          <div class="right-details">
            
          </div>
        </div>
        
      </footer>
    </div>
    <aside class="toc-drawer">
      
      
      <div class="toc-sticky toc-scroll">
        <div class="toc-title-container">
          <span class="toc-title">
            On this page
          </span>
        </div>
        <div class="toc-tree-container">
          <div class="toc-tree">
            <ul>
<li><a class="reference internal" href="#">Receiving and Sending Data</a><ul>
<li><a class="reference internal" href="#connecting-and-configuration">Connecting and Configuration</a></li>
<li><a class="reference internal" href="#receiving-data">Receiving Data</a></li>
<li><a class="reference internal" href="#sending-data">Sending Data</a></li>
<li><a class="reference internal" href="#dds">DDS</a></li>
</ul>
</li>
</ul>

          </div>
        </div>
      </div>
      
      
    </aside>
  </div>
</div><script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="_static/doctools.js"></script>
    <script src="_static/sphinx_highlight.js"></script>
    <script src="_static/scripts/furo.js"></script>
    <script src="_static/design-tabs.js"></script>
    <script src="https://unpkg.com/mermaid@10.2.0/dist/mermaid.min.js"></script>
    <script>mermaid.initialize({startOnLoad:true});</script>
    </body>
</html>