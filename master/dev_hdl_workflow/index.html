
<!DOCTYPE html>

<html class="no-js" lang="en">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width,initial-scale=1" name="viewport"/>
<link href="../assets/images/favicon.png" rel="icon"/>
<meta content="mkdocs-1.3.0, mkdocs-material-8.2.11" name="generator"/>
<title>HDL Workflow - Analog Devices, Inc. Transceiver Toolbox</title>
<link href="../assets/stylesheets/main.8c5ef100.min.css" rel="stylesheet"/>
<link href="../assets/stylesheets/palette.9647289d.min.css" rel="stylesheet"/>
<link crossorigin="" href="https://fonts.gstatic.com" rel="preconnect"/>
<link href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&amp;display=fallback" rel="stylesheet"/>
<style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
<link href="../stylesheets/style.css" rel="stylesheet"/>
<link href="../stylesheets/rd_style.css" rel="stylesheet"/>
<script>__md_scope=new URL("..",location),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
</head>
<body data-md-color-accent="" data-md-color-primary="blue" data-md-color-scheme="default" dir="ltr">
<script>var palette=__md_get("__palette");if(palette&&"object"==typeof palette.color)for(var key of Object.keys(palette.color))document.body.setAttribute("data-md-color-"+key,palette.color[key])</script>
<input autocomplete="off" class="md-toggle" data-md-toggle="drawer" id="__drawer" type="checkbox"/>
<input autocomplete="off" class="md-toggle" data-md-toggle="search" id="__search" type="checkbox"/>
<label class="md-overlay" for="__drawer"></label>
<div data-md-component="skip">
<a class="md-skip" href="#hdl-workflow">
          Skip to content
        </a>
</div>
<div data-md-component="announce">
</div>
<header class="md-header" data-md-component="header">
<nav aria-label="Header" class="md-header__inner md-grid">
<a aria-label="Analog Devices, Inc. Transceiver Toolbox" class="md-header__button md-logo" data-md-component="logo" href=".." title="Analog Devices, Inc. Transceiver Toolbox">
<img alt="logo" src="../assets/matlab_white_icon.svg"/>
</a>
<label class="md-header__button md-icon" for="__drawer">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"></path></svg>
</label>
<div class="md-header__title" data-md-component="header-title">
<div class="md-header__ellipsis">
<div class="md-header__topic">
<span class="md-ellipsis">
            Analog Devices, Inc. Transceiver Toolbox
          </span>
</div>
<div class="md-header__topic" data-md-component="header-topic">
<span class="md-ellipsis">
            
              HDL Workflow
            
          </span>
</div>
</div>
</div>
<form class="md-header__option" data-md-component="palette">
<input aria-label="Switch to dark mode" class="md-option" data-md-color-accent="" data-md-color-media="" data-md-color-primary="blue" data-md-color-scheme="default" id="__palette_1" name="__palette" type="radio"/>
<label class="md-header__button md-icon" for="__palette_2" hidden="" title="Switch to dark mode">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M17 6H7c-3.31 0-6 2.69-6 6s2.69 6 6 6h10c3.31 0 6-2.69 6-6s-2.69-6-6-6zm0 10H7c-2.21 0-4-1.79-4-4s1.79-4 4-4h10c2.21 0 4 1.79 4 4s-1.79 4-4 4zM7 9c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z"></path></svg>
</label>
<input aria-label="Switch to light mode" class="md-option" data-md-color-accent="" data-md-color-media="" data-md-color-primary="blue" data-md-color-scheme="slate" id="__palette_2" name="__palette" type="radio"/>
<label class="md-header__button md-icon" for="__palette_1" hidden="" title="Switch to light mode">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M17 7H7a5 5 0 0 0-5 5 5 5 0 0 0 5 5h10a5 5 0 0 0 5-5 5 5 0 0 0-5-5m0 8a3 3 0 0 1-3-3 3 3 0 0 1 3-3 3 3 0 0 1 3 3 3 3 0 0 1-3 3Z"></path></svg>
</label>
</form>
<label class="md-header__button md-icon" for="__search">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"></path></svg>
</label>
<div class="md-search" data-md-component="search" role="dialog">
<label class="md-search__overlay" for="__search"></label>
<div class="md-search__inner" role="search">
<form class="md-search__form" name="search">
<input aria-label="Search" autocapitalize="off" autocomplete="off" autocorrect="off" class="md-search__input" data-md-component="search-query" name="query" placeholder="Search" required="" spellcheck="false" type="text"/>
<label class="md-search__icon md-icon" for="__search">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"></path></svg>
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"></path></svg>
</label>
<nav aria-label="Search" class="md-search__options">
<button aria-label="Clear" class="md-search__icon md-icon" tabindex="-1" type="reset">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"></path></svg>
</button>
</nav>
</form>
<div class="md-search__output">
<div class="md-search__scrollwrap" data-md-scrollfix="">
<div class="md-search-result" data-md-component="search-result">
<div class="md-search-result__meta">
            Initializing search
          </div>
<ol class="md-search-result__list"></ol>
</div>
</div>
</div>
</div>
</div>
</nav>
</header>
<div class="md-container" data-md-component="container">
<main class="md-main" data-md-component="main">
<div class="md-main__inner md-grid">
<div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation">
<div class="md-sidebar__scrollwrap">
<div class="md-sidebar__inner">
<nav aria-label="Navigation" class="md-nav md-nav--primary" data-md-level="0">
<label class="md-nav__title" for="__drawer">
<a aria-label="Analog Devices, Inc. Transceiver Toolbox" class="md-nav__button md-logo" data-md-component="logo" href=".." title="Analog Devices, Inc. Transceiver Toolbox">
<img alt="logo" src="../assets/matlab_white_icon.svg"/>
</a>
    Analog Devices, Inc. Transceiver Toolbox
  </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="..">
        Overview
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../install/">
        Installation
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../streaming/">
        Data Streaming
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../targeting/">
        HDL Targeting
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../examples/">
        Examples
      </a>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" data-md-toggle="__nav_6" id="__nav_6" type="checkbox"/>
<label class="md-nav__link" for="__nav_6">
          Reference API
          <span class="md-nav__icon md-icon"></span>
</label>
<nav aria-label="Reference API" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_6">
<span class="md-nav__icon md-icon"></span>
          Reference API
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" data-md-toggle="__nav_6_1" id="__nav_6_1" type="checkbox"/>
<label class="md-nav__link" for="__nav_6_1">
          HDL Reference Designs
          <span class="md-nav__icon md-icon"></span>
</label>
<nav aria-label="HDL Reference Designs" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_6_1">
<span class="md-nav__icon md-icon"></span>
          HDL Reference Designs
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../hdlrefdesigns/fmcomms2/">
        fmcomms2
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../hdlrefdesigns/adrv9361z7035/">
        adrv9361z7035
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../hdlrefdesigns/adrv9364z7020/">
        adrv9364z7020
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../hdlrefdesigns/pluto/">
        pluto
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../hdlrefdesigns/adrv9371/">
        adrv9371
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../hdlrefdesigns/adrv9002/">
        adrv9002
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../hdlrefdesigns/adrv9009/">
        adrv9009
      </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" data-md-toggle="__nav_6_2" id="__nav_6_2" type="checkbox"/>
<label class="md-nav__link" for="__nav_6_2">
          Device Interfaces
          <span class="md-nav__icon md-icon"></span>
</label>
<nav aria-label="Device Interfaces" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_6_2">
<span class="md-nav__icon md-icon"></span>
          Device Interfaces
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../sysobjects/adi.AD9361.Tx/">
        adi.AD9361.Tx
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../sysobjects/adi.AD9361.Rx/">
        adi.AD9361.Rx
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../sysobjects/adi.AD9363.Tx/">
        adi.AD9363.Tx
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../sysobjects/adi.AD9363.Rx/">
        adi.AD9363.Rx
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../sysobjects/adi.AD9364.Tx/">
        adi.AD9364.Tx
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../sysobjects/adi.AD9364.Rx/">
        adi.AD9364.Rx
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../sysobjects/adi.AD9371.Tx/">
        adi.AD9371.Tx
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../sysobjects/adi.AD9371.Rx/">
        adi.AD9371.Rx
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../sysobjects/adi.ADRV9009.Tx/">
        adi.ADRV9009.Tx
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../sysobjects/adi.ADRV9009.Rx/">
        adi.ADRV9009.Rx
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../sysobjects/adi.ADRV9361Z7035.Tx/">
        adi.ADRV9361Z7035.Tx
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../sysobjects/adi.ADRV9361Z7035.Rx/">
        adi.ADRV9361Z7035.Rx
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../sysobjects/adi.ADRV9364Z7020.Tx/">
        adi.ADRV9364Z7020.Tx
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../sysobjects/adi.ADRV9364Z7020.Rx/">
        adi.ADRV9364Z7020.Rx
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../sysobjects/adi.ADRV9371.Tx/">
        adi.ADRV9371.Tx
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../sysobjects/adi.ADRV9371.Rx/">
        adi.ADRV9371.Rx
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../sysobjects/adi.FMComms2.Tx/">
        adi.FMComms2.Tx
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../sysobjects/adi.FMComms2.Rx/">
        adi.FMComms2.Rx
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../sysobjects/adi.FMComms3.Tx/">
        adi.FMComms3.Tx
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../sysobjects/adi.FMComms3.Rx/">
        adi.FMComms3.Rx
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../sysobjects/adi.FMComms4.Tx/">
        adi.FMComms4.Tx
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../sysobjects/adi.FMComms4.Rx/">
        adi.FMComms4.Rx
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../sysobjects/adi.PackRF.Tx/">
        adi.PackRF.Tx
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../sysobjects/adi.PackRF.Rx/">
        adi.PackRF.Rx
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../sysobjects/adi.Pluto.Tx/">
        adi.Pluto.Tx
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../sysobjects/adi.Pluto.Rx/">
        adi.Pluto.Rx
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../sysobjects/adi.ADRV9002.Tx/">
        adi.ADRV9002.Tx
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../sysobjects/adi.ADRV9002.Rx/">
        adi.ADRV9002.Rx
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../sysobjects/adi.FMComms8.Tx/">
        adi.FMComms8.Tx
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../sysobjects/adi.FMComms8.Rx/">
        adi.FMComms8.Rx
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../sysobjects/adi.ADRV9009ZU11EG.Tx/">
        adi.ADRV9009ZU11EG.Tx
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../sysobjects/adi.ADRV9009ZU11EG.Rx/">
        adi.ADRV9009ZU11EG.Rx
      </a>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--active md-nav__item--nested">
<input checked="" class="md-nav__toggle md-toggle" data-md-toggle="__nav_7" id="__nav_7" type="checkbox"/>
<label class="md-nav__link" for="__nav_7">
          Developers
          <span class="md-nav__icon md-icon"></span>
</label>
<nav aria-label="Developers" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_7">
<span class="md-nav__icon md-icon"></span>
          Developers
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item md-nav__item--active">
<input class="md-nav__toggle md-toggle" data-md-toggle="toc" id="__toc" type="checkbox"/>
<label class="md-nav__link md-nav__link--active" for="__toc">
          HDL Workflow
          <span class="md-nav__icon md-icon"></span>
</label>
<a class="md-nav__link md-nav__link--active" href="./">
        HDL Workflow
      </a>
<nav aria-label="Table of contents" class="md-nav md-nav--secondary">
<label class="md-nav__title" for="__toc">
<span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
<ul class="md-nav__list" data-md-component="toc" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="#hdl-repo-preparation">
    HDL Repo Preparation
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#hdl-coder-ip-core-generation-flow">
    HDL-Coder IP Core Generation Flow
  </a>
<nav aria-label="HDL-Coder IP Core Generation Flow" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#vivado-project-perspective">
    Vivado Project Perspective
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#generated-tcl-scripts">
    Generated TCL Scripts
  </a>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</div>
</div>
</div>
<div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc">
<div class="md-sidebar__scrollwrap">
<div class="md-sidebar__inner">
<nav aria-label="Table of contents" class="md-nav md-nav--secondary">
<label class="md-nav__title" for="__toc">
<span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
<ul class="md-nav__list" data-md-component="toc" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="#hdl-repo-preparation">
    HDL Repo Preparation
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#hdl-coder-ip-core-generation-flow">
    HDL-Coder IP Core Generation Flow
  </a>
<nav aria-label="HDL-Coder IP Core Generation Flow" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#vivado-project-perspective">
    Vivado Project Perspective
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#generated-tcl-scripts">
    Generated TCL Scripts
  </a>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</div>
</div>
</div>
<div class="md-content" data-md-component="content">
<article class="md-content__inner md-typeset">
<h1 id="hdl-workflow">HDL Workflow</h1>
<p>!!! warning This content is meant for developers or advanced users and is not meant for general consumption.</p>
<p>This page discusses the HDL targeting support from the perspective of the HDL source repo and HDL-Coder itself. It is not necessary for users to understand these details but for those managing the toolbox or developers extending support to new platforms this information is valuable.</p>
<p>This page assumes a basic understanding of MathWork's <a href="https://www.mathworks.com/help/hdlcoder/ug/overview-of-workflows-in-hdl-workflow-advisor.html">HDL Workflow Advisor (HWA)</a> and its different steps for creating IP, creating a HDL project, and generating a bitstream. </p>
<h2 id="hdl-repo-preparation">HDL Repo Preparation</h2>
<p>When the toolbox is built it will clone a specific branch of the <a href="github.com/analogdevicesinc/hdl">ADI HDL repo</a> and apply certain changes to support the <a href="https://www.mathworks.com/discovery/ip-core-generation.html">IP-Core Generation HDL-Coder</a> workflow. However, with the current flow there are minimal changes required which makes moving between release simpler. This is currently done by simply replacing certain TCL scripts within the HDL repo. </p>
<p>Creation of the toolbox, cloning of the HDL source, and applying the necessary update is driven through a Makefile in the <strong>CI/scripts</strong> folder. The toolbox is built in source form with the <strong>build</strong> as follows:</p>
<p><div class="highlight"><pre><span></span><code><a href="#__codelineno-0-1" id="__codelineno-0-1" name="__codelineno-0-1"></a>make -C CI/scripts build
</code></pre></div>
After the above command completes the HDL source will be in place with necessary changes.</p>
<p>The changes primarily required of the HDL source are interceptions of the build functions (procs) to skip synthesis when building a project. This is done by inserting environmental variable checks into the <a href="https://github.com/analogdevicesinc/TransceiverToolbox/blob/master/CI/scripts/adi_project_xilinx.tcl#L138">adi_project_xilinx.tcl</a> script. At build time these environmental variables are set and will prevent synthesis. This way an HDL project can be built, then handed off to HDL-Coder for IP insertion and eventual synthesis.</p>
<p>HDL-Coder is limited to only interact with Vivado or Quartus. Therefore, it cannot leverage the makefiles as traditionally used to build HDL projects in the HDL repo. HDL-Coder and the authored scripts in the toolbox use the <a href="https://wiki.analog.com/resources/fpga/docs/build#xilinx_auto_tcl_build">TCL flow</a> normally recommended for just Windows users. This is used on all platforms (Windows and Linux) to support HDL code-generation and integration with ADI toolboxes.</p>
<h2 id="hdl-coder-ip-core-generation-flow">HDL-Coder IP Core Generation Flow</h2>
<p>The orchestration of Vivado and calling of specific TCL scripts is managed through MathWork's <a href="https://www.mathworks.com/help/hdlcoder/ug/overview-of-workflows-in-hdl-workflow-advisor.html">HWA</a>. HWA generates HDL (Verilog is currently the only supported language) for specific Simulink blocks, calls a number of TCL scripts maintained by ADI to build a project and make room for IP, then inserts that IP and calls synthesis. This will be discussed from HWA and the generated scripts it creates. This is detailed from the scripting perspective first in the figure below:</p>
<p><div class="mermaid">graph LR
A[1. Generate Verilog<br/>From Simulink IP]--&gt;B[2. Optional: Pre-BuildProject Script];
subgraph SS[vivado_create_prj.tcl]
subgraph vivado_custom_block_design.tcl
B --&gt; C[3. Build StandardProject<i>system_project.tcl</i>];
C --&gt; D[4. Prune PreprocessorScript<i>matlab_processors.tcl</i>];
D --&gt; E[5. Optional: Post-BuildProject Script];
end
end
E --&gt; F[6. Insert and ConnectGenerate IP<i>vivado_insert_ip.tcl</i>];

style B fill:#f9f,stroke:#333,stroke-width:4px
style E fill:#f9f,stroke:#333,stroke-width:4px
style C fill:#FF0,stroke:#333,stroke-width:4px,stroke-dasharray: 5 5
style D fill:#FF0,stroke:#333,stroke-width:4px,stroke-dasharray: 5 5
</div>
<center>Figure 1: Details IP-Core Generation flow with Toolbox</center></p>
<p>At a high-level there are six main steps, two of which are optional. From the far left stage "Generate Verilog From Simulink IP" occurs in Stage 3 "HDL Code Generation" within HWA as outlined in red below. This will create Verilog within the defined project folder and then be copied into the full HDL project later on.</p>
<figure>
<p><img alt="" src="../HWA_verilog_gen.png" width="80%">
</img></p>
<figcaption>Figure 2: HDL Workflow Advisor IP verilog generation.</figcaption>
</figure>
<p>Within the largest central block of the flowchart labeled <strong>vivado_create_prj.tcl</strong> are all the core steps related the HWA Step 4.1, where the reference HDL project folder is built and necessary cores and nets removed to make room for IP from Simulink generated in HWA Step 3. This stage is highlighed in the figure below. The purple boxes are optional stages that are used in certain customized examples when additional work is required to prepare a reference design. The <a href="https://github.com/analogdevicesinc/TransceiverToolbox/tree/master/trx_examples/targeting/frequency-hopping">Frequency Hopping example</a> leverages these stages. Once the project is prepared the IP is inserted and bitstream generated, which occurs through HWA Step 4.3.</p>
<figure>
<p><img alt="" src="../HWA_project_gen.png" width="80%">
</img></p>
<figcaption>Figure 3: HDL Workflow Advisor project generation step.</figcaption>
</figure>
<h3 id="vivado-project-perspective">Vivado Project Perspective</h3>
<p>Based on the flow in Figure 1, there are a three main states the HDL reference design enters from a high level. These states will be discussed more from the Vivado project perspective, specifically the data path of an FMComms2 project. Other HDL projects will be similar.</p>
<p>The first state is just the initial creation of the standard unmodified block design. Looking at Figure 4, the three IPs show the dataflow from the interface core (axi_ad9361), through the ADC FIFO, and finally into the pack core. In orange are the data buses and valid signal highlighted. These are important since the generated IP needs to be inserted where these nets are connected. Therefore, in the second state of the design these nets are removed to make room from the new IP.</p>
<figure>
<p><img alt="" src="../stock_reference_design.png" width="80%"/>
</p>
<figcaption>Figure 4: RX path in unmodified standard reference design.</figcaption>
</figure>
<p>Once the IP is inserted into the project by HDL-Coder it is connected to the FIFO and pack cores where the nets in Figure 4 were highlighted. The new inserted and connected IP can be see in Figure 5.</p>
<figure>
<p><img alt="" src="../reference_design_with_IP.png" width="80%"/>
</p>
<figcaption>Figure 5: RX path with inserted IP from HDL-Coder.</figcaption>
</figure>
<p>The connecting of the IPs and insertion are entirely managed by HDL-Coder and through the <a href="https://github.com/analogdevicesinc/TransceiverToolbox/blob/master/hdl/vendor/AnalogDevices/+AnalogDevices/add_io_ports.m">add_io_ports</a> function and supporting <a href="https://github.com/analogdevicesinc/TransceiverToolbox/blob/master/hdl/vendor/AnalogDevices/+AnalogDevices/ports.json">JSON port definition file</a>.</p>
<h3 id="generated-tcl-scripts">Generated TCL Scripts</h3>
<p>The following scripts outlined in the figure above have certain purposes:</p>
<ul>
<li><strong>vivado_create_prj.tcl</strong>: This is the first TCL scripted called in Stage 4 of HWA and is responsible for setting up a standard reference design and trimming nets and IPs to make room for IP from Simulink</li>
<li><strong>vivado_custom_block_design.tcl</strong>: This is a carbon copy of the <strong>system_project_rxtx.tcl</strong> script and is called by <strong>vivado_create_prj.tcl</strong>. This script will call <a href="https://wiki.analog.com/resources/fpga/docs/build#xilinx_auto_tcl_build">adi_make.tcl</a>, the correct system_project.tcl file, and finally matlab_processor.tcl. It will optionally call the pre/post processor TCL scripts.</li>
<li><strong>vivado_insert_ip.tcl</strong>: This script is fully generated by MATLAB based on the <a href="https://github.com/analogdevicesinc/TransceiverToolbox/blob/master/hdl/vendor/AnalogDevices/+AnalogDevices/add_io.m">add_io</a> definitions in MATLAB to insert the custom IP into the prepared reference design.</li>
</ul>
</article>
</div>
</div>
</main>
<footer class="md-footer">
<nav aria-label="Footer" class="md-footer__inner md-grid">
<a aria-label="Previous: adi.ADRV9009ZU11EG.Rx" class="md-footer__link md-footer__link--prev" href="../sysobjects/adi.ADRV9009ZU11EG.Rx/" rel="prev">
<div class="md-footer__button md-icon">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"></path></svg>
</div>
<div class="md-footer__title">
<div class="md-ellipsis">
<span class="md-footer__direction">
                Previous
              </span>
              adi.ADRV9009ZU11EG.Rx
            </div>
</div>
</a>
</nav>
<div class="md-footer-meta md-typeset">
<div class="md-footer-meta__inner md-grid">
<div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" rel="noopener" target="_blank">
      Material for MkDocs
    </a>
</div>
</div>
</div>
</footer>
</div>
<div class="md-dialog" data-md-component="dialog">
<div class="md-dialog__inner md-typeset"></div>
</div>
<script id="__config" type="application/json">{"base": "..", "features": [], "search": "../assets/javascripts/workers/search.2a1c317c.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version.title": "Select version"}}</script>
<script src="../assets/javascripts/bundle.748e2769.min.js"></script>
<script src="../js/sys_objects.js"></script>
<script src="https://unpkg.com/mermaid@8.8.0/dist/mermaid.min.js"></script><script>mermaid.initialize({});</script></body>
</html>